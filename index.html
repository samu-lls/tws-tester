<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Teste de Fone</title>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet"/>
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RESET & BASE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{height:100%}
body{font-family:'DM Sans',sans-serif;background:#07070f;color:#f0f0f5;overflow-x:hidden;cursor:none;height:100%}

/* â”€â”€ Custom cursor â”€â”€ */
#cur{position:fixed;width:9px;height:9px;background:#fff;border-radius:50%;pointer-events:none;z-index:99999;transform:translate(-50%,-50%);mix-blend-mode:difference;transition:width .15s,height .15s}
#cur.h{width:5px;height:5px}
#curR{position:fixed;width:34px;height:34px;border:1.5px solid rgba(255,255,255,.4);border-radius:50%;pointer-events:none;z-index:99998;transform:translate(-50%,-50%);transition:width .2s,height .2s,opacity .2s}
#curR.h{width:48px;height:48px;opacity:.35}

/* â”€â”€ Noise overlay â”€â”€ */
.noise::after{content:'';position:absolute;inset:0;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.04'/%3E%3C/svg%3E");pointer-events:none;z-index:2;opacity:.7}

/* â”€â”€ Toast â”€â”€ */
#toast{position:fixed;bottom:28px;left:50%;transform:translateX(-50%);z-index:10000;background:rgba(15,15,25,.95);border:1px solid rgba(255,255,255,.1);border-radius:12px;padding:12px 20px;font-size:.73rem;color:rgba(255,255,255,.65);display:flex;align-items:center;gap:10px;backdrop-filter:blur(20px);opacity:0;transition:opacity .3s;pointer-events:none;white-space:nowrap}
#toast.show{opacity:1}
#toast .t-icon{font-size:1rem}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HEADER / NAV
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#header{
  position:fixed;top:0;left:0;right:0;z-index:9000;
  display:flex;align-items:center;justify-content:space-between;
  padding:0 40px;height:60px;
  background:rgba(7,7,15,.55);
  border-bottom:1px solid rgba(255,255,255,.07);
  backdrop-filter:blur(24px) saturate(1.4);
  -webkit-backdrop-filter:blur(24px) saturate(1.4);
}
.nav-brand{font-size:.68rem;font-weight:700;letter-spacing:4px;text-transform:uppercase;color:rgba(255,255,255,.35);cursor:pointer;transition:color .2s}
.nav-brand:hover{color:rgba(255,255,255,.7)}
.nav-links{display:flex;align-items:center;gap:4px}
.nav-link{
  font-size:.65rem;font-weight:600;letter-spacing:2.5px;text-transform:uppercase;
  color:rgba(255,255,255,.35);padding:8px 16px;border-radius:8px;
  cursor:pointer;transition:all .2s;position:relative;border:1px solid transparent;
}
.nav-link:hover,.nav-link.active{color:#fff;background:rgba(255,255,255,.07);border-color:rgba(255,255,255,.1)}
.nav-link.active{color:#fff}
.nav-link::after{content:'';position:absolute;bottom:-1px;left:50%;transform:translateX(-50%);width:0;height:1px;background:#1DB954;transition:width .25s}
.nav-link.active::after{width:60%}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PAGES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.page{display:none;height:100vh;overflow:hidden;padding-top:60px}
.page.active{display:block}
/* Pages that need internal scroll */
#page-home,#page-playlist{overflow-y:auto}
#page-apoiase{overflow:hidden}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HOME PAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#page-home{}

/* Hero */
.home-hero{
  position:relative;min-height:100vh;display:flex;flex-direction:column;
  justify-content:center;padding:0 80px;overflow:hidden;
}
.home-hero-bg{
  position:absolute;inset:0;
  background:radial-gradient(ellipse 70% 65% at 10% 90%,rgba(29,185,84,.11) 0,transparent 55%),
             radial-gradient(ellipse 60% 55% at 90% 10%,rgba(100,60,200,.08) 0,transparent 55%);
  animation:breathe 10s ease-in-out infinite alternate;
}
@keyframes breathe{from{opacity:.6}to{opacity:1}}
.home-hero-inner{position:relative;z-index:3;max-width:760px}
.home-eyebrow{font-size:.62rem;font-weight:700;letter-spacing:4px;text-transform:uppercase;color:#1DB954;margin-bottom:24px;display:flex;align-items:center;gap:10px}
.home-eyebrow::before{content:'';width:28px;height:1px;background:#1DB954}
.home-h1{font-family:'Cormorant Garamond',serif;font-size:clamp(3.8rem,7.5vw,8rem);line-height:.9;font-weight:300;letter-spacing:-4px;color:#fff;margin-bottom:28px}
.home-h1 em{font-style:italic;color:rgba(255,255,255,.32)}
.home-sub{font-size:1rem;line-height:1.9;color:rgba(255,255,255,.38);font-weight:300;max-width:480px;margin-bottom:56px}

/* Nav cards row */
.home-nav-cards{display:flex;gap:12px;flex-wrap:wrap}
.hnc{
  display:flex;flex-direction:column;gap:6px;
  padding:18px 22px;border-radius:16px;
  border:1px solid rgba(255,255,255,.08);
  background:rgba(255,255,255,.03);
  cursor:pointer;transition:all .25s;min-width:150px;
  backdrop-filter:blur(12px);position:relative;overflow:hidden;
}
.hnc::before{content:'';position:absolute;inset:0;background:var(--hc,#1DB954);opacity:0;transition:opacity .25s;border-radius:16px}
.hnc:hover{border-color:var(--hc,#1DB954);transform:translateY(-3px);box-shadow:0 12px 32px rgba(0,0,0,.5)}
.hnc:hover::before{opacity:.08}
.hnc-arrow{font-size:.65rem;color:var(--hc,#1DB954);position:relative;z-index:1;opacity:0;transition:opacity .2s;transform:translateY(2px)}
.hnc:hover .hnc-arrow{opacity:1;transform:translateY(0)}
.hnc-label{font-size:.58rem;font-weight:700;letter-spacing:3px;text-transform:uppercase;color:var(--hc,#1DB954);position:relative;z-index:1}
.hnc-title{font-family:'Cormorant Garamond',serif;font-size:1.4rem;font-weight:300;color:#fff;position:relative;z-index:1}
.hnc-desc{font-size:.7rem;color:rgba(255,255,255,.35);line-height:1.6;position:relative;z-index:1}

/* Home scroll indicator */
.home-scroll{position:absolute;bottom:36px;left:80px;display:flex;align-items:center;gap:10px;font-size:.6rem;letter-spacing:2.5px;text-transform:uppercase;color:rgba(255,255,255,.22);z-index:3}
.home-scroll-dot{width:5px;height:5px;border-radius:50%;background:#1DB954;animation:blink 1.5s ease-in-out infinite}
@keyframes blink{0%,100%{opacity:.25}50%{opacity:1}}

/* Challenges section in Home */
.home-challenges{padding:80px 80px 100px}
.home-challenges-header{margin-bottom:48px}
.hch-eyebrow{font-size:.6rem;font-weight:700;letter-spacing:4px;text-transform:uppercase;color:#1DB954;margin-bottom:16px;display:flex;align-items:center;gap:10px}
.hch-eyebrow::before{content:'';width:24px;height:1px;background:#1DB954}
.hch-title{font-family:'Cormorant Garamond',serif;font-size:clamp(2.2rem,4vw,3.5rem);font-weight:300;letter-spacing:-2px;color:#fff}
.hch-title em{font-style:italic;color:rgba(255,255,255,.32)}

/* Level rows */
.lvl-section{margin-bottom:40px}
.lvl-header{display:flex;align-items:center;gap:14px;margin-bottom:16px;padding-bottom:12px;border-bottom:1px solid rgba(255,255,255,.05)}
.lvl-badge{display:flex;align-items:center;gap:8px}
.lvl-emoji{font-size:.9rem}
.lvl-name-txt{font-size:.58rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:rgba(255,255,255,.28)}
.lvl-pips-row{display:flex;gap:3px}
.lvl-pip-dot{width:5px;height:5px;border-radius:50%;background:rgba(255,255,255,.1)}

/* Challenge cards grid */
.challenge-cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px}
.ccard{
  padding:18px 20px;border-radius:14px;
  border:1px solid rgba(255,255,255,.07);
  background:rgba(255,255,255,.025);
  cursor:pointer;transition:all .22s;
  backdrop-filter:blur(8px);position:relative;overflow:hidden;
}
.ccard::before{content:'';position:absolute;inset:0;background:var(--cc,#1DB954);opacity:0;transition:opacity .22s;border-radius:14px}
.ccard:hover{border-color:var(--cc,#1DB954);transform:translateY(-2px);box-shadow:0 10px 28px rgba(0,0,0,.45)}
.ccard:hover::before{opacity:.07}
.ccard-genre{font-size:.55rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--cc,#1DB954);margin-bottom:8px;position:relative;z-index:1}
.ccard-challenge{font-size:.82rem;font-weight:500;color:#fff;margin-bottom:10px;line-height:1.45;position:relative;z-index:1}
.ccard-track{font-size:.72rem;color:rgba(255,255,255,.38);position:relative;z-index:1}
.ccard-track strong{color:rgba(255,255,255,.6);font-weight:500}
.ccard-arrow{position:absolute;bottom:16px;right:16px;width:24px;height:24px;border-radius:50%;border:1px solid var(--cc,#1DB954);display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .2s;z-index:1}
.ccard:hover .ccard-arrow{opacity:1}
.ccard-arrow svg{width:10px;height:10px;stroke:var(--cc,#1DB954)}

/* â”€â”€ POPUP / MODAL â”€â”€ */
#modal-overlay{
  position:fixed;inset:0;z-index:8000;
  background:rgba(3,3,10,.75);backdrop-filter:blur(16px);
  display:flex;align-items:center;justify-content:center;
  opacity:0;pointer-events:none;transition:opacity .3s;
  padding:20px;
}
#modal-overlay.open{opacity:1;pointer-events:all}
.modal-box{
  position:relative;width:100%;max-width:640px;max-height:90vh;overflow-y:auto;
  background:rgba(14,14,24,.96);border:1px solid rgba(255,255,255,.1);
  border-radius:24px;padding:40px;
  box-shadow:0 32px 80px rgba(0,0,0,.8);
  transform:translateY(16px) scale(.97);transition:transform .3s;
}
#modal-overlay.open .modal-box{transform:translateY(0) scale(1)}
.modal-close{
  position:absolute;top:18px;right:18px;
  width:32px;height:32px;border-radius:50%;
  border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.05);
  color:rgba(255,255,255,.5);font-size:14px;cursor:pointer;
  display:flex;align-items:center;justify-content:center;transition:all .2s;
}
.modal-close:hover{background:rgba(255,255,255,.12);color:#fff}
.modal-genre-badge{display:inline-flex;align-items:center;font-size:.55rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:4px 12px;border-radius:999px;border:1px solid var(--tc,#1DB954);color:var(--tc,#1DB954);background:color-mix(in srgb,var(--tc,#1DB954) 8%,transparent);margin-bottom:16px}
.modal-challenge{font-size:.65rem;font-weight:700;letter-spacing:3px;text-transform:uppercase;color:var(--tc,#1DB954);margin-bottom:12px;display:flex;align-items:center;gap:8px}
.modal-challenge::before{content:'';width:18px;height:1px;background:var(--tc,#1DB954)}
.modal-title{font-family:'Cormorant Garamond',serif;font-size:clamp(2rem,4vw,3rem);font-weight:300;letter-spacing:-2px;color:#fff;margin-bottom:6px;line-height:.95}
.modal-artist{font-size:.85rem;color:rgba(255,255,255,.38);margin-bottom:24px;font-weight:300}
.modal-desc{font-size:.82rem;line-height:1.85;color:rgba(255,255,255,.5);border-left:2px solid var(--tc,#1DB954);padding-left:14px;margin-bottom:28px;font-weight:300}
.modal-diff{display:flex;align-items:center;gap:10px;margin-bottom:28px}
.modal-diff-label{font-size:.58rem;letter-spacing:2px;text-transform:uppercase;color:rgba(255,255,255,.25)}
.modal-diff-pips{display:flex;gap:4px}
.modal-diff-pip{width:7px;height:7px;border-radius:50%;background:rgba(255,255,255,.1)}
.modal-diff-pip.on{background:var(--tc,#1DB954);box-shadow:0 0 6px var(--tc,#1DB954)}

/* Modal player */
.modal-player{display:flex;flex-direction:column;align-items:center;gap:18px;padding:24px;border-radius:16px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.06)}
.modal-vinyl{width:120px;height:120px;border-radius:50%;position:relative;
  background:conic-gradient(#191919 0deg,#0f0f0f 12deg,#191919 24deg,#0f0f0f 36deg,#191919 48deg,#0f0f0f 60deg,#191919 72deg,#0f0f0f 84deg,#191919 96deg,#0f0f0f 108deg,#191919 120deg,#0f0f0f 132deg,#191919 144deg,#0f0f0f 156deg,#191919 168deg,#0f0f0f 180deg,#191919 192deg,#0f0f0f 204deg,#191919 216deg,#0f0f0f 228deg,#191919 240deg,#0f0f0f 252deg,#191919 264deg,#0f0f0f 276deg,#191919 288deg,#0f0f0f 300deg,#191919 312deg,#0f0f0f 324deg,#191919 336deg,#0f0f0f 348deg);
  box-shadow:0 0 0 1.5px rgba(255,255,255,.05),0 16px 40px rgba(0,0,0,.7);
  animation:spin 8s linear infinite paused;flex-shrink:0}
.modal-vinyl::before{content:'';position:absolute;inset:28%;border-radius:50%;background:var(--tc,#1DB954);box-shadow:0 0 16px var(--tc,#1DB954);opacity:.9}
.modal-vinyl::after{content:'';position:absolute;inset:46%;border-radius:50%;background:#0e0e18;box-shadow:0 0 0 1.5px rgba(255,255,255,.08)}
.modal-vinyl.playing{animation-play-state:running}
@keyframes spin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
.modal-waveform{display:flex;align-items:flex-end;gap:3px;height:28px}
.modal-wb{width:3px;border-radius:3px;background:var(--tc,#1DB954);opacity:.6;animation:wa .9s ease-in-out infinite alternate paused}
.modal-waveform.playing .modal-wb{animation-play-state:running}
@keyframes wa{from{transform:scaleY(.15)}to{transform:scaleY(1)}}
.modal-controls{display:flex;align-items:center;gap:12px}
.modal-play-btn{width:52px;height:52px;border-radius:50%;background:rgba(255,255,255,.08);border:1.5px solid rgba(255,255,255,.18);color:#fff;font-size:15px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;backdrop-filter:blur(10px)}
.modal-play-btn:hover{background:rgba(255,255,255,.16);transform:scale(1.06)}
.modal-play-btn.playing{background:var(--tc,#1DB954);border-color:var(--tc,#1DB954);color:#000}
.modal-play-btn.loading{opacity:.6;cursor:wait}
.modal-sp-btn{display:inline-flex;align-items:center;gap:7px;padding:9px 16px;border-radius:999px;background:rgba(29,185,84,.12);border:1px solid rgba(29,185,84,.28);color:#1DB954;font-size:.68rem;font-weight:600;letter-spacing:.8px;text-decoration:none;transition:all .2s;text-transform:uppercase}
.modal-sp-btn:hover{background:rgba(29,185,84,.22);transform:translateY(-2px)}
.modal-prog{width:100%;display:flex;flex-direction:column;gap:5px}
.modal-track-bar{width:100%;height:2px;background:rgba(255,255,255,.1);border-radius:2px;cursor:pointer}
.modal-track-fill{height:100%;background:var(--tc,#1DB954);border-radius:2px;width:0%}
.modal-times{display:flex;justify-content:space-between;font-size:.58rem;color:rgba(255,255,255,.28)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EXPERIENCE PAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#page-experience{overflow:hidden}
.exp-page{overflow-y:auto;overflow-x:hidden}

/* Snap scroll inside experience */
.exp-scroll-container{
  height:calc(100vh - 60px);overflow-y:scroll;overflow-x:hidden;
  scroll-snap-type:y mandatory;scroll-behavior:auto;
}
.exp-section{
  width:100%;height:calc(100vh - 60px);scroll-snap-align:start;
  position:relative;overflow:hidden;display:flex;flex-direction:column;
}
.exp-section::after{content:'';position:absolute;inset:0;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.04'/%3E%3C/svg%3E");pointer-events:none;z-index:2;opacity:.7}

/* Exp screen 1 â€” fone */
#exp-intro{background:#07070f;justify-content:center;align-items:center}
.exp-intro-bg{position:absolute;inset:0;background:radial-gradient(ellipse 65% 65% at 50% 50%,rgba(29,185,84,.08) 0,transparent 60%)}
.exp-intro-inner{position:relative;z-index:3;display:flex;flex-direction:column;align-items:center;text-align:center;gap:24px;max-width:520px;padding:0 32px}
.exp-headphone-icon{font-size:4rem;animation:float 3s ease-in-out infinite}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
.exp-intro-title{font-family:'Cormorant Garamond',serif;font-size:clamp(2.4rem,5vw,4rem);font-weight:300;letter-spacing:-2px;color:#fff;line-height:.95}
.exp-intro-title em{font-style:italic;color:rgba(255,255,255,.35)}
.exp-intro-sub{font-size:.85rem;color:rgba(255,255,255,.38);line-height:1.8;font-weight:300}
.exp-play-btn{
  width:64px;height:64px;border-radius:50%;
  background:rgba(29,185,84,.15);border:1.5px solid rgba(29,185,84,.4);
  color:#1DB954;font-size:20px;cursor:pointer;
  display:flex;align-items:center;justify-content:center;
  transition:all .25s;margin-top:8px;
  box-shadow:0 0 32px rgba(29,185,84,.15);
}
.exp-play-btn:hover{background:rgba(29,185,84,.28);transform:scale(1.08);box-shadow:0 0 48px rgba(29,185,84,.25)}

/* Exp screen 2 â€” intro text */
#exp-about{background:#07070f;justify-content:center;align-items:center}
.exp-about-bg{position:absolute;inset:0;background:radial-gradient(ellipse 55% 55% at 20% 80%,rgba(29,185,84,.1) 0,transparent 55%),radial-gradient(ellipse 50% 50% at 80% 20%,rgba(100,60,200,.07) 0,transparent 55%)}
.exp-about-inner{position:relative;z-index:3;max-width:640px;padding:0 56px}
.exp-about-eyebrow{font-size:.6rem;font-weight:700;letter-spacing:4px;text-transform:uppercase;color:#1DB954;margin-bottom:20px;display:flex;align-items:center;gap:10px}
.exp-about-eyebrow::before{content:'';width:24px;height:1px;background:#1DB954}
.exp-about-title{font-family:'Cormorant Garamond',serif;font-size:clamp(2.6rem,5vw,4.5rem);font-weight:300;letter-spacing:-3px;color:#fff;line-height:.93;margin-bottom:24px}
.exp-about-title em{font-style:italic;color:rgba(255,255,255,.32)}
.exp-about-body{font-size:.9rem;line-height:2;color:rgba(255,255,255,.42);font-weight:300;border-left:2px solid rgba(29,185,84,.4);padding-left:18px}
.exp-about-cta{margin-top:36px;display:inline-flex;align-items:center;gap:8px;font-size:.65rem;font-weight:700;letter-spacing:2.5px;text-transform:uppercase;color:rgba(255,255,255,.3);animation:fc 2.2s ease-in-out infinite}
@keyframes fc{0%,100%{transform:translateY(0)}50%{transform:translateY(4px)}}
.exp-about-arrow{width:16px;height:16px;border-right:1px solid currentColor;border-bottom:1px solid currentColor;transform:rotate(45deg);margin-top:-4px}

/* Exp screen 3 â€” desafios grid */
#exp-challenges{background:#07070f;justify-content:center;align-items:center}
.exp-ch-bg{position:absolute;inset:0;background:radial-gradient(ellipse 70% 60% at 85% 15%,rgba(29,185,84,.09) 0,transparent 55%),radial-gradient(ellipse 55% 55% at 15% 85%,rgba(100,60,200,.07) 0,transparent 55%)}
.exp-ch-inner{position:relative;z-index:3;width:100%;max-width:1100px;padding:0 56px}
.exp-ch-title{font-family:'Cormorant Garamond',serif;font-size:clamp(1.6rem,3vw,2.6rem);font-weight:300;letter-spacing:-2px;color:#fff;margin-bottom:32px;text-align:center}
.exp-ch-title em{font-style:italic;color:rgba(255,255,255,.32)}
/* 5 colunas (uma por nÃ­vel) */
.exp-ch-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:10px;align-items:start}
.exp-ch-col{}
.exp-ch-col-header{display:flex;flex-direction:column;align-items:center;gap:6px;margin-bottom:12px;padding-bottom:10px;border-bottom:1px solid rgba(255,255,255,.06)}
.exp-ch-lv-emoji{font-size:1rem}
.exp-ch-lv-name{font-size:.5rem;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;color:rgba(255,255,255,.25)}
.exp-ch-pips{display:flex;gap:2px}
.exp-ch-pip{width:4px;height:4px;border-radius:50%;background:rgba(255,255,255,.1)}
.exp-ch-item{
  padding:10px 12px;border-radius:10px;margin-bottom:7px;
  border:1px solid rgba(255,255,255,.06);background:rgba(255,255,255,.02);
  cursor:pointer;transition:all .2s;font-size:.7rem;color:rgba(255,255,255,.55);
  line-height:1.4;
}
.exp-ch-item:hover{border-color:var(--cc,#1DB954);color:#fff;background:rgba(255,255,255,.04);transform:scale(1.02)}

/* Exp track sections */
.exp-ts{justify-content:center;align-items:center}
.t-bg{position:absolute;inset:-60px;background-size:cover;background-position:center;filter:blur(90px) saturate(1.6) brightness(.28);transform:scale(1.15)}
.t-ov{position:absolute;inset:0;background:radial-gradient(ellipse 75% 75% at 50% 50%,rgba(7,7,15,0) 25%,rgba(7,7,15,.9) 75%),linear-gradient(to bottom,rgba(7,7,15,.7) 0,transparent 25%,transparent 75%,rgba(7,7,15,.85) 100%)}
.t-prog{position:absolute;top:0;left:0;height:2px;background:linear-gradient(90deg,var(--tc,#1DB954),color-mix(in srgb,var(--tc,#1DB954) 60%,#fff));width:0%;z-index:10;box-shadow:0 0 10px var(--tc,#1DB954);transition:width .25s linear}
.t-nav{position:absolute;top:22px;left:0;right:0;display:flex;justify-content:space-between;align-items:center;padding:0 44px;z-index:10}
.t-ctr{font-size:.62rem;letter-spacing:3px;text-transform:uppercase;color:rgba(255,255,255,.28)}
.t-genre{font-size:.6rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:4px 13px;border-radius:999px;border:1px solid var(--tc,#1DB954);color:var(--tc,#1DB954);background:color-mix(in srgb,var(--tc,#1DB954) 8%,transparent);backdrop-filter:blur(8px)}
.t-content{position:relative;z-index:5;display:grid;grid-template-columns:1fr 1fr;gap:72px;align-items:center;padding:0 56px;width:100%;max-width:1160px}
.challenge-label{font-size:.62rem;font-weight:700;letter-spacing:3px;text-transform:uppercase;color:var(--tc,#1DB954);margin-bottom:12px;display:flex;align-items:center;gap:8px}
.challenge-label::before{content:'';width:18px;height:1px;background:var(--tc,#1DB954)}
.t-title{font-family:'Cormorant Garamond',serif;font-size:clamp(2.6rem,4.5vw,4.8rem);line-height:.93;font-weight:300;letter-spacing:-2px;color:#fff;margin-bottom:8px}
.t-artist{font-size:.88rem;color:rgba(255,255,255,.38);font-weight:300;margin-bottom:26px;letter-spacing:.3px}
.t-desc{font-size:.82rem;line-height:1.85;color:rgba(255,255,255,.45);max-width:400px;font-weight:300;border-left:2px solid var(--tc,#1DB954);padding-left:14px}
.t-player{display:flex;flex-direction:column;align-items:center;gap:22px}
.vinyl{width:190px;height:190px;border-radius:50%;position:relative;
  background:conic-gradient(#191919 0deg,#0f0f0f 12deg,#191919 24deg,#0f0f0f 36deg,#191919 48deg,#0f0f0f 60deg,#191919 72deg,#0f0f0f 84deg,#191919 96deg,#0f0f0f 108deg,#191919 120deg,#0f0f0f 132deg,#191919 144deg,#0f0f0f 156deg,#191919 168deg,#0f0f0f 180deg,#191919 192deg,#0f0f0f 204deg,#191919 216deg,#0f0f0f 228deg,#191919 240deg,#0f0f0f 252deg,#191919 264deg,#0f0f0f 276deg,#191919 288deg,#0f0f0f 300deg,#191919 312deg,#0f0f0f 324deg,#191919 336deg,#0f0f0f 348deg);
  box-shadow:0 0 0 1.5px rgba(255,255,255,.05),0 24px 60px rgba(0,0,0,.8);
  animation:spin 8s linear infinite paused}
.vinyl::before{content:'';position:absolute;inset:28%;border-radius:50%;background:var(--tc,#1DB954);box-shadow:0 0 20px var(--tc,#1DB954);opacity:.9}
.vinyl::after{content:'';position:absolute;inset:46%;border-radius:50%;background:#07070f;box-shadow:0 0 0 1.5px rgba(255,255,255,.08)}
.vinyl.playing{animation-play-state:running}
.waveform{display:flex;align-items:flex-end;gap:3px;height:38px}
.wb{width:3px;border-radius:3px;background:var(--tc,#1DB954);opacity:.6;animation:wa .9s ease-in-out infinite alternate paused}
.waveform.playing .wb{animation-play-state:running}
.controls-row{display:flex;align-items:center;gap:14px}
.play-btn{width:58px;height:58px;border-radius:50%;background:rgba(255,255,255,.08);border:1.5px solid rgba(255,255,255,.18);color:#fff;font-size:17px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;backdrop-filter:blur(10px)}
.play-btn:hover{background:rgba(255,255,255,.18);transform:scale(1.06)}
.play-btn.playing{background:var(--tc,#1DB954);border-color:var(--tc,#1DB954);color:#000}
.play-btn.loading{opacity:.6;cursor:wait}
.sp-btn{display:inline-flex;align-items:center;gap:7px;padding:9px 18px;border-radius:999px;background:rgba(29,185,84,.12);border:1px solid rgba(29,185,84,.28);color:#1DB954;font-size:.7rem;font-weight:600;letter-spacing:.8px;text-decoration:none;transition:all .2s;text-transform:uppercase}
.sp-btn:hover{background:rgba(29,185,84,.22);transform:translateY(-2px)}
.sp-ico{width:15px;height:15px;flex-shrink:0}
.a-prog{width:100%;display:flex;flex-direction:column;gap:5px}
.a-track{width:100%;height:2px;background:rgba(255,255,255,.1);border-radius:2px;cursor:pointer;position:relative}
.a-fill{height:100%;background:var(--tc,#1DB954);border-radius:2px;width:0%}
.a-times{display:flex;justify-content:space-between;font-size:.6rem;color:rgba(255,255,255,.28);letter-spacing:.4px}
.t-footer{position:absolute;bottom:0;left:0;right:0;display:flex;justify-content:space-between;align-items:center;padding:18px 44px;z-index:10}
.diff{display:flex;align-items:center;gap:8px;font-size:.6rem;letter-spacing:2px;text-transform:uppercase;color:rgba(255,255,255,.22)}
.d-pips{display:flex;gap:4px}
.d-pip{width:6px;height:6px;border-radius:50%;background:rgba(255,255,255,.1)}
.d-pip.on{background:var(--tc,#1DB954);box-shadow:0 0 5px var(--tc,#1DB954)}
.next-cue{font-size:.6rem;letter-spacing:2px;text-transform:uppercase;color:rgba(255,255,255,.2);display:flex;align-items:center;gap:7px;animation:fc 2.2s ease-in-out infinite}
.nc-arrow{width:18px;height:18px;border-right:1px solid rgba(255,255,255,.18);border-bottom:1px solid rgba(255,255,255,.18);transform:rotate(45deg);margin-top:-5px}

/* Exp side dots */
#exp-sdots{position:fixed;right:22px;top:50%;transform:translateY(-50%);z-index:8500;display:flex;flex-direction:column;gap:8px;display:none}
#exp-sdots.visible{display:flex}
.exp-sdot{width:5px;height:5px;border-radius:50%;background:rgba(255,255,255,.14);cursor:pointer;transition:all .28s}
.exp-sdot.active{background:#fff;transform:scale(1.5);box-shadow:0 0 7px rgba(255,255,255,.35)}
.exp-sdot:hover{background:rgba(255,255,255,.45)}

/* Nav prev/next in exp tracks */
.exp-nav-btn{position:absolute;bottom:18px;z-index:20;display:flex;align-items:center;gap:8px;padding:9px 18px;border-radius:999px;border:1px solid rgba(255,255,255,.12);background:rgba(255,255,255,.05);color:rgba(255,255,255,.45);font-size:.65rem;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;cursor:pointer;transition:all .22s;backdrop-filter:blur(10px)}
.exp-nav-btn:hover{background:rgba(255,255,255,.12);border-color:rgba(255,255,255,.25);color:rgba(255,255,255,.8);transform:translateY(-1px)}
.exp-nav-btn.prev{left:44px}
.exp-nav-btn.next{right:44px}
.exp-nav-btn svg{width:14px;height:14px;flex-shrink:0}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PLAYLIST PAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#page-playlist{display:flex;flex-direction:column}
.pl-page-inner{max-width:780px;margin:0 auto;width:100%;padding:60px 40px 100px}
.pl-header{margin-bottom:48px}
.pl-eyebrow{font-size:.6rem;font-weight:700;letter-spacing:4px;text-transform:uppercase;color:#1DB954;margin-bottom:16px;display:flex;align-items:center;gap:10px}
.pl-eyebrow::before{content:'';width:24px;height:1px;background:#1DB954}
.pl-title{font-family:'Cormorant Garamond',serif;font-size:clamp(2.4rem,5vw,4rem);font-weight:300;letter-spacing:-3px;color:#fff;margin-bottom:14px;line-height:.93}
.pl-title em{font-style:italic;color:rgba(255,255,255,.32)}
.pl-meta{display:flex;align-items:center;gap:16px;flex-wrap:wrap}
.pl-count-badge{font-size:.65rem;color:rgba(255,255,255,.28);letter-spacing:1px}
.pl-sp-link{display:inline-flex;align-items:center;gap:8px;padding:10px 20px;border-radius:999px;background:rgba(29,185,84,.12);border:1px solid rgba(29,185,84,.3);color:#1DB954;font-size:.7rem;font-weight:600;letter-spacing:.8px;text-decoration:none;transition:all .22s;text-transform:uppercase}
.pl-sp-link:hover{background:rgba(29,185,84,.22);transform:translateY(-2px);box-shadow:0 8px 24px rgba(29,185,84,.15)}

/* Playlist controls bar */
.pl-controls{display:flex;align-items:center;gap:12px;margin-bottom:24px;padding:16px 20px;border-radius:16px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.07)}
.pl-ctrl-btn{width:40px;height:40px;border-radius:50%;background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.12);color:rgba(255,255,255,.6);font-size:14px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;flex-shrink:0}
.pl-ctrl-btn:hover{background:rgba(255,255,255,.14);color:#fff}
.pl-ctrl-btn.active-play{background:#1DB954;border-color:#1DB954;color:#000}
.pl-now-playing{flex:1;min-width:0}
.pl-np-track{font-size:.8rem;font-weight:500;color:#fff;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.pl-np-artist{font-size:.68rem;color:rgba(255,255,255,.35)}
.pl-progress-wrap{display:flex;flex-direction:column;gap:4px;flex:1;min-width:0}
.pl-prog-bar{width:100%;height:2px;background:rgba(255,255,255,.1);border-radius:2px;cursor:pointer}
.pl-prog-fill{height:100%;background:#1DB954;border-radius:2px;width:0%;transition:width .1s linear}
.pl-times{display:flex;justify-content:space-between;font-size:.55rem;color:rgba(255,255,255,.25)}

/* Volume control */
.pl-vol-wrap{display:flex;align-items:center;gap:8px;flex-shrink:0}
.pl-vol-icon{font-size:.85rem;color:rgba(255,255,255,.4);cursor:pointer;transition:color .2s;user-select:none}
.pl-vol-icon:hover{color:rgba(255,255,255,.75)}
.pl-vol-slider{-webkit-appearance:none;appearance:none;width:72px;height:2px;border-radius:2px;background:rgba(255,255,255,.15);outline:none;cursor:pointer}
.pl-vol-slider::-webkit-slider-thumb{-webkit-appearance:none;width:12px;height:12px;border-radius:50%;background:#1DB954;cursor:pointer;transition:transform .15s}
.pl-vol-slider::-webkit-slider-thumb:hover{transform:scale(1.3)}
.pl-vol-slider::-moz-range-thumb{width:12px;height:12px;border-radius:50%;background:#1DB954;border:none;cursor:pointer}
.pl-track-row{
  display:flex;align-items:center;gap:14px;
  padding:11px 16px;border-radius:10px;
  cursor:pointer;transition:all .18s;
  border:1px solid transparent;
}
.pl-track-row:hover{background:rgba(255,255,255,.04);border-color:rgba(255,255,255,.06)}
.pl-track-row.active{background:rgba(29,185,84,.07);border-color:rgba(29,185,84,.18)}
.pl-tr-num{font-size:.6rem;color:rgba(255,255,255,.2);font-weight:600;width:22px;text-align:right;flex-shrink:0}
.pl-track-row.active .pl-tr-num{color:#1DB954}
.pl-tr-icon{width:22px;text-align:center;flex-shrink:0;font-size:12px;color:#1DB954;display:none}
.pl-track-row.active .pl-tr-num{display:none}
.pl-track-row.active .pl-tr-icon{display:block}
.pl-tr-info{flex:1;min-width:0}
.pl-tr-name{font-size:.78rem;font-weight:500;color:rgba(255,255,255,.7);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.pl-track-row.active .pl-tr-name{color:#fff}
.pl-track-row:hover .pl-tr-name{color:#fff}
.pl-tr-artist{font-size:.66rem;color:rgba(255,255,255,.28)}
.pl-tr-genre{font-size:.55rem;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;padding:3px 9px;border-radius:999px;border:1px solid rgba(255,255,255,.08);color:rgba(255,255,255,.3);flex-shrink:0}
.pl-tr-lv{display:flex;gap:2px;flex-shrink:0}
.pl-tr-pip{width:4px;height:4px;border-radius:50%;background:rgba(255,255,255,.08)}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   APOIA-SE PAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#page-apoiase{height:100%;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}
.ap-bg{position:absolute;inset:0;background:radial-gradient(ellipse 60% 60% at 30% 70%,rgba(255,180,50,.07) 0,transparent 55%),radial-gradient(ellipse 50% 50% at 70% 30%,rgba(100,60,200,.07) 0,transparent 55%)}
.ap-inner{position:relative;z-index:3;max-width:600px;padding:0 40px;text-align:center}
.ap-icon{font-size:3rem;margin-bottom:24px;animation:float 3s ease-in-out infinite}
.ap-eyebrow{font-size:.6rem;font-weight:700;letter-spacing:4px;text-transform:uppercase;color:rgba(255,180,50,.8);margin-bottom:16px;display:flex;align-items:center;justify-content:center;gap:10px}
.ap-eyebrow::before,.ap-eyebrow::after{content:'';width:20px;height:1px;background:rgba(255,180,50,.5)}
.ap-title{font-family:'Cormorant Garamond',serif;font-size:clamp(2.4rem,5vw,4rem);font-weight:300;letter-spacing:-2px;color:#fff;margin-bottom:16px;line-height:.93}
.ap-title em{font-style:italic;color:rgba(255,255,255,.32)}
.ap-desc{font-size:.88rem;line-height:1.9;color:rgba(255,255,255,.4);font-weight:300;margin-bottom:40px}
.ap-cards{display:flex;gap:14px;justify-content:center;flex-wrap:wrap;margin-bottom:40px}
.ap-card{
  flex:1;min-width:150px;max-width:180px;
  padding:24px 20px;border-radius:18px;
  border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.03);
  text-align:center;transition:all .25s;cursor:default;
  backdrop-filter:blur(10px);
}
.ap-card-val{font-family:'Cormorant Garamond',serif;font-size:1.8rem;font-weight:300;color:#fff;margin-bottom:4px}
.ap-card-label{font-size:.6rem;letter-spacing:1.5px;text-transform:uppercase;color:rgba(255,255,255,.28)}
.ap-btn{
  display:inline-flex;align-items:center;gap:10px;
  padding:16px 32px;border-radius:999px;
  background:rgba(255,180,50,.15);border:1px solid rgba(255,180,50,.4);
  color:#ffb432;font-size:.78rem;font-weight:600;letter-spacing:1px;
  text-decoration:none;transition:all .25s;text-transform:uppercase;
  cursor:pointer;
}
.ap-btn:hover{background:rgba(255,180,50,.25);transform:translateY(-2px);box-shadow:0 12px 32px rgba(255,180,50,.15)}
.ap-note{margin-top:20px;font-size:.65rem;color:rgba(255,255,255,.18);letter-spacing:.5px}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MOBILE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
@media(max-width:768px){
  body{cursor:auto}
  #cur,#curR{display:none}
  #header{padding:0 20px;height:56px}
  .nav-brand{display:none}
  .nav-link{padding:6px 10px;font-size:.58rem;letter-spacing:1.5px}
  .page{padding-top:56px}
  .home-hero{padding:0 24px;min-height:calc(100vh - 56px)}
  .home-h1{font-size:clamp(2.8rem,10vw,4rem);letter-spacing:-2px}
  .home-sub{font-size:.82rem}
  .home-nav-cards{gap:8px}
  .hnc{min-width:130px;padding:14px 16px}
  .home-scroll{left:24px;bottom:24px}
  .home-challenges{padding:48px 24px 64px}
  .challenge-cards{grid-template-columns:1fr 1fr}
  .exp-about-inner{padding:0 24px}
  .exp-ch-inner{padding:0 16px}
  .exp-ch-grid{grid-template-columns:repeat(3,1fr)}
  .t-content{grid-template-columns:1fr;gap:0;padding:0 24px;align-items:center;justify-items:center;text-align:center;padding-top:56px}
  .challenge-label{justify-content:center}
  .challenge-label::before{display:none}
  .t-title{font-size:clamp(1.9rem,8vw,2.8rem);letter-spacing:-1.5px}
  .t-artist{font-size:.78rem;margin-bottom:14px}
  .t-desc{font-size:.74rem;border-left:none;border-top:2px solid var(--tc,#1DB954);padding-left:0;padding-top:10px;text-align:left;max-width:100%}
  .t-player{gap:14px;width:100%;align-items:center;padding-top:16px}
  .vinyl{width:120px;height:120px}
  .waveform{height:28px}
  .t-footer{padding:12px 20px}
  .exp-nav-btn{padding:8px 14px;font-size:.58rem}
  .exp-nav-btn.prev{left:20px}
  .exp-nav-btn.next{right:20px}
  #exp-sdots{right:10px}
  .pl-page-inner{padding:40px 20px 80px}
  .pl-controls{flex-wrap:wrap;gap:8px}
  .ap-inner{padding:0 24px}
  .ap-cards{gap:10px}
  .ap-card{min-width:120px;padding:18px 14px}
}
@media(max-width:390px){
  .exp-ch-grid{grid-template-columns:repeat(2,1fr)}
  .challenge-cards{grid-template-columns:1fr}
}
</style>
</head>
<body>

<div id="cur"></div>
<div id="curR"></div>
<div id="toast"><span class="t-icon">ğŸµ</span><span id="toast-msg"></span></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     HEADER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<header id="header">
  <span class="nav-brand" onclick="nav('home')">Teste de Fone</span>
  <nav class="nav-links">
    <span class="nav-link active" data-page="home" onclick="nav('home')">Home</span>
    <span class="nav-link" data-page="experience" onclick="nav('experience')">Experience</span>
    <span class="nav-link" data-page="playlist" onclick="nav('playlist')">Playlist</span>
    <span class="nav-link" data-page="apoiase" onclick="nav('apoiase')">Apoia-se</span>
  </nav>
</header>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MODAL POPUP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="modal-overlay" onclick="closeModal(event)">
  <div class="modal-box" id="modal-box">
    <button class="modal-close" onclick="closeModal(null,true)">âœ•</button>
    <div id="modal-genre-badge" class="modal-genre-badge"></div>
    <p class="modal-challenge" id="modal-ch-label"></p>
    <h2 class="modal-title" id="modal-title"></h2>
    <p class="modal-artist" id="modal-artist"></p>
    <p class="modal-desc" id="modal-desc"></p>
    <div class="modal-diff">
      <span class="modal-diff-label">Dificuldade</span>
      <div class="modal-diff-pips" id="modal-diff-pips"></div>
    </div>
    <div class="modal-player">
      <div style="display:flex;align-items:center;gap:20px;width:100%">
        <div class="modal-vinyl" id="modal-vinyl"></div>
        <div style="flex:1;display:flex;flex-direction:column;gap:14px">
          <div class="modal-waveform" id="modal-waveform">
            <!-- bars injected by JS -->
          </div>
          <div class="modal-controls">
            <button class="modal-play-btn" id="modal-play-btn" onclick="modalPlayClick()">â–¶</button>
            <a class="modal-sp-btn" id="modal-sp-btn" href="#" target="_blank" rel="noopener">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="#1DB954"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/></svg>
              Spotify
            </a>
          </div>
        </div>
      </div>
      <div class="modal-prog" style="width:100%">
        <div class="modal-track-bar" id="modal-bar" onclick="modalSeek(event)">
          <div class="modal-track-fill" id="modal-fill"></div>
        </div>
        <div class="modal-times"><span id="modal-tm">0:00</span><span id="modal-dur">â€”</span></div>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     HOME PAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="page-home" class="page active">

  <!-- Hero -->
  <div class="home-hero noise">
    <div class="home-hero-bg"></div>
    <div class="home-hero-inner">
      <p class="home-eyebrow">20 desafios sonoros</p>
      <h1 class="home-h1">AtÃ© onde vai<br/><em>o seu fone?</em></h1>
      <p class="home-sub">Uma experiÃªncia imersiva projetada para levar cada frequÃªncia do seu headphone ao limite â€” graves, agudos, dinÃ¢mica, espaÃ§o sonoro e muito mais.</p>
      <div class="home-nav-cards">
        <div class="hnc" style="--hc:#1DB954" onclick="nav('experience')">
          <span class="hnc-label">Experience</span>
          <span class="hnc-title">O teste</span>
          <span class="hnc-desc">20 mÃºsicas, 5 nÃ­veis, um fone no limite.</span>
          <span class="hnc-arrow">â†‘ cabeÃ§alho</span>
        </div>
      </div>
    </div>
    <div class="home-scroll"><span class="home-scroll-dot"></span>Role para ver os desafios</div>
  </div>

  <!-- Challenges by level -->
  <div class="home-challenges">
    <div class="home-challenges-header">
      <p class="hch-eyebrow">Os desafios</p>
      <h2 class="hch-title">Clique e<br/><em>teste agora</em></h2>
    </div>
    <div id="home-challenges-body"></div>
  </div>

</div><!-- /page-home -->

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     EXPERIENCE PAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="page-experience" class="page">
  <div id="exp-sdots"></div>
  <div class="exp-scroll-container" id="exp-scroll">

    <!-- Tela 1: coloque o fone -->
    <div class="exp-section" id="exp-intro">
      <div class="exp-intro-bg"></div>
      <div class="exp-intro-inner" style="position:relative;z-index:3">
        <div class="exp-headphone-icon">ğŸ§</div>
        <h2 class="exp-intro-title">Coloque o fone<br/><em>nos dois ouvidos</em></h2>
        <p class="exp-intro-sub">Para uma experiÃªncia completa, use fones com os dois canais. O teste foi desenhado para a escuta binaural â€” cada detalhe importa.</p>
        <button class="exp-play-btn" onclick="expGoToAbout()">â–¶</button>
      </div>
    </div>

    <!-- Tela 2: sobre a experiÃªncia -->
    <div class="exp-section" id="exp-about">
      <div class="exp-about-bg"></div>
      <div class="exp-about-inner">
        <p class="exp-about-eyebrow">A experiÃªncia</p>
        <h2 class="exp-about-title">20 mÃºsicas.<br/><em>Um fone.</em></h2>
        <p class="exp-about-body">Cada faixa foi escolhida para desafiar uma caracterÃ­stica diferente do seu headphone. HÃ¡ mÃºsicas que testam o grave profundo, outras que exigem agilidade nos agudos, separaÃ§Ã£o de instrumentos, dinÃ¢mica orquestral e muito mais.<br/><br/>Cada desafio tem um nÃ­vel de dificuldade: do <strong>Aquecimento</strong> atÃ© o <strong>Extremo</strong>. Role para ver todos os desafios e, em seguida, a experiÃªncia comeÃ§a automaticamente.</p>
        <div class="exp-about-cta">Role para continuar <div class="exp-about-arrow"></div></div>
      </div>
    </div>

    <!-- Tela 3: grid de desafios -->
    <div class="exp-section" id="exp-challenges">
      <div class="exp-ch-bg"></div>
      <div class="exp-ch-inner">
        <h2 class="exp-ch-title">Os <em>desafios</em></h2>
        <div class="exp-ch-grid" id="exp-ch-grid"></div>
      </div>
    </div>

    <!-- Faixas injected by JS -->
    <div id="exp-tracks"></div>

  </div><!-- /exp-scroll-container -->
</div><!-- /page-experience -->

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     PLAYLIST PAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="page-playlist" class="page">
  <div class="pl-page-inner">

    <div class="pl-header">
      <p class="pl-eyebrow">A trilha do teste</p>
      <h2 class="pl-title">Playlist<br/><em>completa</em></h2>
      <div class="pl-meta">
        <span class="pl-count-badge">20 faixas Â· 5 nÃ­veis</span>
        <a class="pl-sp-link" href="https://open.spotify.com/playlist/4N9QsntuVrFVrEl92QsjhK?si=6H9e25v2SriAtCZQiVH9ug" target="_blank" rel="noopener">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="#1DB954"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/></svg>
          Abrir no Spotify
        </a>
      </div>
    </div>

    <!-- Controls bar -->
    <div class="pl-controls" id="pl-controls">
      <button class="pl-ctrl-btn" id="pl-prev-btn" onclick="plPrev()" title="Anterior">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="19 20 9 12 19 4"/><line x1="5" y1="4" x2="5" y2="20"/></svg>
      </button>
      <button class="pl-ctrl-btn" id="pl-play-btn" onclick="plPlayPause()">â–¶</button>
      <button class="pl-ctrl-btn" id="pl-next-btn" onclick="plNext()" title="PrÃ³xima">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="5 4 15 12 5 20"/><line x1="19" y1="4" x2="19" y2="20"/></svg>
      </button>
      <div class="pl-now-playing">
        <div class="pl-np-track" id="pl-np-track">â€”</div>
        <div class="pl-np-artist" id="pl-np-artist">Selecione uma faixa</div>
      </div>
      <div class="pl-progress-wrap">
        <div class="pl-prog-bar" id="pl-prog-bar" onclick="plSeek(event)">
          <div class="pl-prog-fill" id="pl-prog-fill"></div>
        </div>
        <div class="pl-times"><span id="pl-tm">0:00</span><span id="pl-dur">â€”</span></div>
      </div>
      <div class="pl-vol-wrap">
        <span class="pl-vol-icon" id="pl-vol-icon" onclick="plToggleMute()">ğŸ”Š</span>
        <input class="pl-vol-slider" id="pl-vol-slider" type="range" min="0" max="1" step="0.02" value="1" oninput="plSetVolume(this.value)"/>
      </div>
    </div>

    <div class="pl-track-list" id="pl-track-list"></div>

  </div>
</div><!-- /page-playlist -->

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     APOIA-SE PAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="page-apoiase" class="page">
  <div class="ap-bg"></div>
  <div class="ap-inner">
    <div class="ap-icon">â¤ï¸</div>
    <p class="ap-eyebrow">Apoie o projeto</p>
    <h2 class="ap-title">Feito com<br/><em>muito carinho</em></h2>
    <p class="ap-desc">Este site Ã© gratuito, sem anÃºncios e feito por amor Ã  mÃºsica e ao bom Ã¡udio. Se vocÃª curtiu a experiÃªncia e quiser ajudar a manter o projeto no ar, qualquer contribuiÃ§Ã£o Ã© muito bem-vinda.</p>
    <div class="ap-cards">
      <div class="ap-card"><div class="ap-card-val">â˜•</div><div class="ap-card-label">Um cafÃ©</div></div>
      <div class="ap-card"><div class="ap-card-val">ğŸµ</div><div class="ap-card-label">Uma faixa</div></div>
      <div class="ap-card"><div class="ap-card-val">ğŸ§</div><div class="ap-card-label">Um upgrade</div></div>
    </div>
    <button class="ap-btn" onclick="showToast('Em breve â€” checkout sendo configurado!',4000)">
      ğŸ’› Quero apoiar
    </button>
    <p class="ap-note">A plataforma de pagamento serÃ¡ vinculada em breve.</p>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     JAVASCRIPT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>
/* â”€â”€â”€ DATA â”€â”€â”€ */
const GC={'Metal Progressivo':'#e05c5c','Rock':'#e07a2f','Groove':'#d4c44a','Pop':'#5c9de0','Pop Alternative':'#a05ce0','R&B':'#e05c9d','Soul':'#e09a5c','Sertanejo':'#5ce07a','Pagode':'#5ccfe0','Rap Brasileiro':'#e0c45c','EletrÃ´nica':'#5c7ae0'};
const GG={'Metal Progressivo':'#7a1515','Rock':'#7a3a0a','Groove':'#6a600a','Pop':'#0a3a7a','Pop Alternative':'#3a0a7a','R&B':'#7a0a40','Soul':'#7a4a0a','Sertanejo':'#0a7a2f','Pagode':'#0a5a7a','Rap Brasileiro':'#7a5a0a','EletrÃ´nica':'#0a1a7a'};
const LE=['','ğŸŸ¢','ğŸŸ¡','ğŸŸ ','ğŸ”´','ğŸ’€'];
const LL=['','Aquecimento','MÃ©dio','DifÃ­cil','AvanÃ§ado','Extremo'];

const T=[
  {lv:1,ch:"Seu fone aguenta o groove?",d:'Uma danÃ§a disfarÃ§ada de teste. Se vocÃª nÃ£o quiser balanÃ§ar a cabeÃ§a, o fone nÃ£o estÃ¡ entregando o ritmo certo.',g:"Groove",s:"Get Lucky",a:"Daft Punk ft. Pharrell",sid:"69kOkLUCkxIZYexIgSG8rq"},
  {lv:1,ch:"Aquela faÃ­sca dos anos 80 ainda aparece?",d:'O sintetizador brilhante que fez essa mÃºsica um hit precisa chegar atÃ© vocÃª. Se parecer abafado, seu fone estÃ¡ engolindo o brilho.',g:"Pop",s:"Blinding Lights",a:"The Weeknd",sid:"0VjIjW4GlUZAMYd2vXMi3b"},
  {lv:1,ch:"Os gritos do MJ chegam nÃ­tidos?",d:'O agudo icÃ´nico do Rei do Pop precisa ser vibrante e energÃ©tico. Se raspar ou sumir, seu fone estÃ¡ perdendo o alto da mÃºsica.',g:"Groove",s:"Don't Stop 'Til You Get Enough",a:"Michael Jackson",sid:"5ChkMS8OtdzJeqyybCc9R5"},
  {lv:2,ch:"VocÃª escuta o baixo E a voz juntos?",d:'O segredo aqui Ã© ouvir o baixo robusto e a voz da Miley ao mesmo tempo, sem um abafar o outro. Fone fraco borra tudo numa lama sÃ³.',g:"Pop",s:"Flowers",a:"Miley Cyrus",sid:"0yLdNVWF3Srea0uzk55zFn"},
  {lv:2,ch:"A voz grave parece ao vivo?",d:'Essa voz profunda de barÃ­tono precisa ter peso e calor. Se parecer nasal ou fina, o fone estÃ¡ cortando as frequÃªncias que fazem a diferenÃ§a.',g:"Soul",s:"No Love Dying",a:"Gregory Porter",sid:"2g9JIMhVlHpbHPdnGbfOkY"},
  {lv:2,ch:"VocÃª sente a orquestra ao redor?",d:'Feche os olhos. A orquestra deve crescer ao seu redor e a voz deve parecer estar bem na sua frente. Ã‰ a diferenÃ§a entre ouvir e sentir.',g:"Soul",s:"Feeling Good",a:"Nina Simone",sid:"4mMbgHuoHEleRi4vFj0RgK"},
  {lv:2,ch:"Os agudos machucam seus ouvidos?",d:'A voz da Hayley Williams Ã© intensa e cheia de energia. Se vocÃª sentir um chiado ou dor no ouvido, seu fone estÃ¡ exagerando nos agudos.',g:"Rock",s:"Misery Business",a:"Paramore",sid:"0ByMNEPAPpOR5H69DVrTNy"},
  {lv:3,ch:"O grave envolve sem sufocar a voz?",d:'Aqui o grave deve ser como uma neblina suave â€” presente em todo lugar, mas sem apagar a voz delicada. EquilÃ­brio Ã© tudo.',g:"R&B",s:"telepatÃ­a",a:"Kali Uchis",sid:"6Fht4kI3PtAAPEFsGiSQSf"},
  {lv:3,ch:"Parece que vocÃª estÃ¡ no show?",d:'O bumbo da viola sertaneja precisa ter peso, mas sem engolir as vozes. Se parecer que vocÃª estÃ¡ lÃ¡ na frente do palco, o fone passou.',g:"Sertanejo",s:"ArranhÃ£o",a:"Lauana Prado",sid:"3FQNkc3mPPCqTFUCDhULUQ"},
  {lv:3,ch:"O pandeiro parece de verdade?",d:'Cada batida do pandeiro precisa ter aquele estalo seco e rÃ¡pido. Se soar borrado ou lento, seu fone nÃ£o estÃ¡ acompanhando o ritmo do pagode.',g:"Pagode",s:"PÃ© Na Areia",a:"Grupo Menos Ã‰ Mais",sid:"0Qhqz8MJc4IpjJJnTGjEPM"},
  {lv:3,ch:"Consegue ouvir cada instrumento?",d:'Ao vivo, sÃ£o vÃ¡rios mÃºsicos tocando ao mesmo tempo. Seu fone deve deixar vocÃª distinguir cada um deles, sem virar uma bagunÃ§a sonora.',g:"Pagode",s:"Sinal Vital",a:"Grupo RevelaÃ§Ã£o",sid:"1qDrGZsQmMGcJJMvnOGIas"},
  {lv:4,ch:"O fone sobrevive ao punk rasgado?",d:'Bateria acelerada, guitarras distorcidas e voz gritada. Tudo ao mesmo tempo. O fone precisa manter a clareza no caos total.',g:"Rock",s:"Basket Case",a:"Green Day",sid:"7EjyzZcaLBFFNYfZFfjMk4"},
  {lv:4,ch:"O sussurro some no grave pesado?",d:'A Billie sussurra enquanto o grave bombeia pesado. Seu fone precisa entregar os dois sem deixar a voz delicada desaparecer no meio do baixo.',g:"Pop Alternative",s:"bad guy",a:"Billie Eilish",sid:"2Fxmhks0bxGSBdJ92vM42m"},
  {lv:4,ch:"O 808 bate no seu peito?",d:'Esse bumbo eletrÃ´nico pesado (o famoso 808) precisa ser firme e seco, quase fÃ­sico. Se parecer frouxo ou distorcido, seu fone nÃ£o aguentou.',g:"R&B",s:"MONACO",a:"Bad Bunny",sid:"4Ft8GHFvj8qlHE0Mry1Xhq"},
  {lv:4,ch:"A voz da Simone distorce no pico?",d:'No refrÃ£o, a voz da Simone vai ao limite. Se seu fone comeÃ§ar a distorcer nos momentos mais intensos, ele nÃ£o tem potÃªncia suficiente.',g:"Sertanejo",s:"Erro Gostoso",a:"Simone Mendes",sid:"3dJZR8vg6rj4lkANIfazpz"},
  {lv:4,ch:"O drop pesado te surpreende?",d:'ComeÃ§a suave e explode. A transiÃ§Ã£o entre o trecho calmo e o drop cheio Ã© o teste definitivo: seu fone precisa te surpreender na virada.',g:"Pop Alternative",s:"Hi-Lo (Hollow)",a:"Vance Joy",sid:"2x5MXKQZ6HHSA2cMCgPWTx"},
  {lv:5,ch:"Metal tÃ©cnico: o fone acompanha?",d:'Aqui viola e distorÃ§Ã£o pesada alternam em segundos. O fone precisa de velocidade para trocar de um extremo ao outro sem embaralhar os sons.',g:"Metal Progressivo",s:"Ghost of Perdition",a:"Opeth",sid:"3O9NfKF9byHvKVSHXqjqiI"},
  {lv:5,ch:"As guitarras escondem a bateria?",d:'Camadas e mais camadas de guitarra. O desafio Ã© ouvir a bateria e o vocal claramente mesmo com tudo aquilo soando ao mesmo tempo.',g:"Metal Progressivo",s:"Blackest Eyes",a:"Porcupine Tree",sid:"0bsn6EsAuQ7n7OTorWZ0nb"},
  {lv:5,ch:"VocÃª entende cada palavra do Mano?",d:'No meio de um beat pesado de rap, cada sÃ­laba do Mano Brown precisa chegar clara. Se a voz sumir no grave, o fone nÃ£o faz o dever de casa.',g:"Rap Brasileiro",s:"A Vida Ã‰ Desafio",a:"Racionais MC's",sid:"5Ww4TFkv3BkHEDrFmvIf0c"},
  {lv:5,ch:"VocÃª sente a nota mais grave do mundo?",d:'Esse Ã© o teste final de sub-bass. A nota mais profunda da mÃºsica sÃ³ aparece para quem tem fone de verdade. VocÃª vai sentir ou vai perder?',g:"Rap Brasileiro",s:"777-666",a:"Veigh",sid:"6T88OcMHvRgIFObNHkwT0R"},
];

const LOCAL_FILES=[
  'audio/01_Get_Lucky.mp3','audio/02_Blinding_Lights.mp3','audio/03_Dont_Stop_Til_You_Get_Enough.mp3',
  'audio/04_Flowers.mp3','audio/05_No_Love_Dying.mp3','audio/06_Feeling_Good.mp3',
  'audio/07_Misery_Business.mp3','audio/08_telepatia.mp3','audio/09_Arranhao.mp3',
  'audio/10_Pe_Na_Areia.mp3','audio/11_Sinal_Vital.mp3','audio/12_Basket_Case.mp3',
  'audio/13_bad_guy.mp3','audio/14_MONACO.mp3','audio/15_Erro_Gostoso.mp3',
  'audio/16_Hi-Lo_Hollow.mp3','audio/17_Ghost_of_Perdition.mp3','audio/18_Blackest_Eyes.mp3',
  'audio/19_A_Vida_E_Desafio.mp3','audio/20_777-666.mp3',
];

/* â”€â”€â”€ AUDIO PLAYER (shared) â”€â”€â”€ */
const player = new Audio();
player.preload = 'none';

/* Contexto atual: 'exp' | 'playlist' | 'modal' */
let playerCtx = null;
let currentTrackIdx = -1;
let progressTimer = null;
let autoPlayEnabled = false;
let expObserver = null;

/* â”€â”€â”€ Player events â”€â”€â”€ */
player.addEventListener('playing', () => {
  if (playerCtx === 'exp') setExpPlayingUI(currentTrackIdx, true);
  if (playerCtx === 'playlist') setPlPlayingUI(currentTrackIdx, true);
  if (playerCtx === 'modal') setModalPlayingUI(true);
  startProgressTimer();
  showToast(`â–¶ ${T[currentTrackIdx].s} â€” ${T[currentTrackIdx].a}`, 4000);
});
player.addEventListener('pause', () => {
  if (playerCtx === 'exp') setExpPlayingUI(currentTrackIdx, false);
  if (playerCtx === 'playlist') setPlPlayingUI(currentTrackIdx, false);
  if (playerCtx === 'modal') setModalPlayingUI(false);
  stopProgressTimer();
});
player.addEventListener('ended', () => {
  if (playerCtx === 'exp') { setExpPlayingUI(currentTrackIdx, false); stopProgressTimer(); resetExpProgress(currentTrackIdx); }
  if (playerCtx === 'playlist') { plNext(); }
  if (playerCtx === 'modal') { setModalPlayingUI(false); stopProgressTimer(); resetModalProgress(); }
});
player.addEventListener('error', () => {
  showToast('âš  Arquivo nÃ£o encontrado â€” verifique a pasta audio/', 5000);
  if (playerCtx === 'exp') setExpPlayingUI(currentTrackIdx, false);
  if (playerCtx === 'playlist') setPlPlayingUI(currentTrackIdx, false);
  if (playerCtx === 'modal') setModalPlayingUI(false);
  stopProgressTimer();
});
player.addEventListener('waiting', () => {
  if (playerCtx === 'exp') { const b = document.getElementById(`pb${currentTrackIdx}`); if(b){b.classList.add('loading');b.innerHTML='â—‹';} }
  if (playerCtx === 'playlist') { const b = document.getElementById('pl-play-btn'); if(b){b.classList.add('loading');b.innerHTML='â—‹';} }
  if (playerCtx === 'modal') { const b = document.getElementById('modal-play-btn'); if(b){b.classList.add('loading');b.innerHTML='â—‹';} }
});

function playTrack(idx, ctx) {
  player.pause();
  currentTrackIdx = idx;
  playerCtx = ctx;
  player.src = LOCAL_FILES[idx];
  player.load();
  player.play().catch(() => showToast('âš  Toque em qualquer lugar para habilitar o Ã¡udio', 4000));
}

function stopAll() {
  player.pause();
  if (currentTrackIdx >= 0) {
    if (playerCtx === 'exp') setExpPlayingUI(currentTrackIdx, false);
    if (playerCtx === 'playlist') setPlPlayingUI(currentTrackIdx, false);
    if (playerCtx === 'modal') setModalPlayingUI(false);
    stopProgressTimer();
  }
  playerCtx = null;
}

/* â”€â”€â”€ Progress timer â”€â”€â”€ */
function startProgressTimer() {
  stopProgressTimer();
  progressTimer = setInterval(() => {
    try {
      const c = player.currentTime, d = player.duration || 0;
      if (!d) return;
      const pct = (c / d) * 100;
      const fmt = (s) => `${Math.floor(s/60)}:${Math.floor(s%60).toString().padStart(2,'0')}`;
      if (playerCtx === 'exp') {
        const f = document.getElementById(`af${currentTrackIdx}`);
        const p = document.getElementById(`p${currentTrackIdx}`);
        const tm = document.getElementById(`atm${currentTrackIdx}`);
        const du = document.getElementById(`adu${currentTrackIdx}`);
        if (f) f.style.width = pct + '%';
        if (p) p.style.width = pct + '%';
        if (tm) tm.textContent = fmt(c);
        if (du) du.textContent = fmt(d);
      }
      if (playerCtx === 'playlist') {
        const f = document.getElementById('pl-prog-fill');
        const tm = document.getElementById('pl-tm');
        const du = document.getElementById('pl-dur');
        if (f) f.style.width = pct + '%';
        if (tm) tm.textContent = fmt(c);
        if (du) du.textContent = fmt(d);
      }
      if (playerCtx === 'modal') {
        const f = document.getElementById('modal-fill');
        const tm = document.getElementById('modal-tm');
        const du = document.getElementById('modal-dur');
        if (f) f.style.width = pct + '%';
        if (tm) tm.textContent = fmt(c);
        if (du) du.textContent = fmt(d);
      }
    } catch(e) {}
  }, 500);
}
function stopProgressTimer() { if (progressTimer) { clearInterval(progressTimer); progressTimer = null; } }

/* â”€â”€â”€ NAVIGATION â”€â”€â”€ */
function nav(page) {
  /* Stop audio when switching away from exp/playlist/modal */
  if (page !== 'experience' && page !== 'playlist') {
    stopAll();
    autoPlayEnabled = false;
  }
  if (page === 'experience') {
    /* Re-enable exp dots */
    document.getElementById('exp-sdots').classList.add('visible');
  } else {
    document.getElementById('exp-sdots').classList.remove('visible');
  }

  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
  document.getElementById('page-' + page).classList.add('active');
  document.querySelector(`[data-page="${page}"]`).classList.add('active');

  /* Scroll exp container to top when entering */
  if (page === 'experience') {
    const sc = document.getElementById('exp-scroll');
    if (sc) sc.scrollTop = 0;
  }
  /* Build playlist if needed */
  if (page === 'playlist') buildPlaylist();
}

/* â”€â”€â”€ CURSOR â”€â”€â”€ */
const isTouch = ('ontouchstart' in window) || navigator.maxTouchPoints > 0;
const cur = document.getElementById('cur'), curR = document.getElementById('curR');
let cx=0, cy=0, rx=0, ry=0;
if (!isTouch) {
  document.addEventListener('mousemove', e => { cx=e.clientX; cy=e.clientY; cur.style.left=cx+'px'; cur.style.top=cy+'px'; });
  (function aR(){ rx+=(cx-rx)*.1; ry+=(cy-ry)*.1; curR.style.left=rx+'px'; curR.style.top=ry+'px'; requestAnimationFrame(aR); })();
}
function hov(on) { if(!isTouch){ cur.classList.toggle('h',on); curR.classList.toggle('h',on); } }

/* â”€â”€â”€ TOAST â”€â”€â”€ */
let toastTimer;
function showToast(msg, dur=3000) {
  const t = document.getElementById('toast');
  document.getElementById('toast-msg').textContent = msg;
  t.classList.add('show');
  clearTimeout(toastTimer);
  toastTimer = setTimeout(() => t.classList.remove('show'), dur);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HOME â€” build challenge cards
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
(function buildHome() {
  const body = document.getElementById('home-challenges-body');
  const byLevel = {};
  T.forEach((t,i) => { (byLevel[t.lv]||(byLevel[t.lv]=[])).push({...t,idx:i}); });
  [1,2,3,4,5].forEach(lv => {
    const group = byLevel[lv]||[];
    if (!group.length) return;
    const sec = document.createElement('div');
    sec.className = 'lvl-section';
    const pips = Array.from({length:5},(_,i)=>`<div class="lvl-pip-dot" style="${i<lv?'background:'+( GC[group[0].g]||'#1DB954')+'60':''}"></div>`).join('');
    sec.innerHTML=`<div class="lvl-header"><div class="lvl-badge"><span class="lvl-emoji">${LE[lv]}</span><span class="lvl-name-txt">NÃ­vel ${lv} â€” ${LL[lv]}</span></div><div class="lvl-pips-row">${pips}</div></div><div class="challenge-cards" id="cc${lv}"></div>`;
    body.appendChild(sec);
    const grid = sec.querySelector(`#cc${lv}`);
    group.forEach(t => {
      const c = GC[t.g]||'#1DB954';
      const card = document.createElement('div');
      card.className='ccard'; card.style.setProperty('--cc',c);
      card.innerHTML=`<div class="ccard-genre">${t.g}</div><div class="ccard-challenge">${t.ch}</div><div class="ccard-track"><strong>${t.s}</strong> Â· ${t.a}</div><div class="ccard-arrow"><svg viewBox="0 0 24 24" fill="none" stroke-width="2.5"><polyline points="9 18 15 12 9 6"/></svg></div>`;
      card.addEventListener('click', () => openModal(t.idx));
      if (!isTouch) { card.addEventListener('mouseenter',()=>hov(true)); card.addEventListener('mouseleave',()=>hov(false)); }
      grid.appendChild(card);
    });
  });
})();

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let modalIdx = -1;

function openModal(idx) {
  modalIdx = idx;
  const t = T[idx];
  const c = GC[t.g]||'#1DB954';
  const box = document.getElementById('modal-box');
  box.style.setProperty('--tc', c);

  document.getElementById('modal-genre-badge').textContent = t.g;
  document.getElementById('modal-genre-badge').style.setProperty('--tc',c);
  document.getElementById('modal-ch-label').textContent = `${LE[t.lv]} ${LL[t.lv]} Â· NÃ­vel ${t.lv}`;
  document.getElementById('modal-ch-label').style.setProperty('--tc',c);
  document.getElementById('modal-title').textContent = t.s;
  document.getElementById('modal-artist').textContent = t.a;
  document.getElementById('modal-desc').textContent = t.d;
  document.getElementById('modal-sp-btn').href = `https://open.spotify.com/track/${t.sid}`;

  const pips = document.getElementById('modal-diff-pips');
  pips.innerHTML = Array.from({length:5},(_,i)=>`<div class="modal-diff-pip${i<t.lv?' on':''}"></div>`).join('');

  const wv = document.getElementById('modal-waveform');
  wv.innerHTML = Array.from({length:14},(_,wi)=>`<div class="modal-wb" style="height:${6+Math.random()*18}px;animation-delay:${wi*.07}s"></div>`).join('');

  const vinyl = document.getElementById('modal-vinyl');
  vinyl.style.setProperty('--tc',c);
  vinyl.classList.remove('playing');

  resetModalProgress();
  setModalPlayingUI(false);

  document.getElementById('modal-overlay').classList.add('open');
  document.body.style.overflow = 'hidden';

  /* If this track is already playing in exp/playlist, sync */
  if (currentTrackIdx === idx && !player.paused) {
    playerCtx = 'modal';
    setModalPlayingUI(true);
  }
}

function closeModal(e, force) {
  if (!force && e && e.target !== document.getElementById('modal-overlay')) return;
  document.getElementById('modal-overlay').classList.remove('open');
  document.body.style.overflow = '';
  if (playerCtx === 'modal') { player.pause(); playerCtx = null; }
}

function modalPlayClick() {
  autoPlayEnabled = true;
  if (playerCtx === 'modal' && currentTrackIdx === modalIdx) {
    if (!player.paused) player.pause(); else player.play().catch(()=>{});
  } else {
    playTrack(modalIdx, 'modal');
  }
}

function modalSeek(e) {
  if (!player.duration) return;
  const r = e.currentTarget.getBoundingClientRect();
  player.currentTime = ((e.clientX - r.left) / r.width) * player.duration;
}

function setModalPlayingUI(on) {
  const btn = document.getElementById('modal-play-btn');
  const vinyl = document.getElementById('modal-vinyl');
  const wv = document.getElementById('modal-waveform');
  if (btn) { btn.innerHTML = on?'â¸':'â–¶'; btn.classList.toggle('playing',on); btn.classList.remove('loading'); }
  if (vinyl) vinyl.classList.toggle('playing', on);
  if (wv) wv.classList.toggle('playing', on);
}

function resetModalProgress() {
  const f=document.getElementById('modal-fill'), tm=document.getElementById('modal-tm'), du=document.getElementById('modal-dur');
  if(f)f.style.width='0%'; if(tm)tm.textContent='0:00'; if(du)du.textContent='â€”';
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EXPERIENCE â€” build sections
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
(function buildExp() {
  /* Challenge grid (tela 3) */
  const grid = document.getElementById('exp-ch-grid');
  const byLevel = {};
  T.forEach((t,i)=>{ (byLevel[t.lv]||(byLevel[t.lv]=[])).push({...t,idx:i}); });
  [1,2,3,4,5].forEach(lv=>{
    const group = byLevel[lv]||[];
    const col = document.createElement('div'); col.className='exp-ch-col';
    const c = GC[group[0]?.g]||'#1DB954';
    const pips = Array.from({length:5},(_,i)=>`<div class="exp-ch-pip" style="${i<lv?'background:'+c+'70':''}"></div>`).join('');
    col.innerHTML=`<div class="exp-ch-col-header"><span class="exp-ch-lv-emoji">${LE[lv]}</span><span class="exp-ch-lv-name">NÃ­vel ${lv}</span><div class="exp-ch-pips">${pips}</div></div>`;
    group.forEach(t=>{
      const item = document.createElement('div');
      item.className='exp-ch-item'; item.style.setProperty('--cc', GC[t.g]||'#1DB954');
      item.textContent = t.ch;
      item.addEventListener('click',()=>expScrollToTrack(t.idx));
      col.appendChild(item);
    });
    grid.appendChild(col);
  });

  /* Track sections */
  const container = document.getElementById('exp-tracks');
  const dots = document.getElementById('exp-sdots');
  /* Dots for 3 intro screens + 20 tracks */
  const totalSections = 3 + T.length;
  for(let di=0; di<totalSections; di++){
    const d=document.createElement('div'); d.className='exp-sdot'+(di===0?' active':'');
    d.addEventListener('click',()=>expScrollToSection(di));
    dots.appendChild(d);
  }

  T.forEach((t,i)=>{
    const c=GC[t.g]||'#1DB954', g2=GG[t.g]||'#0a3a0a';
    const isLast = i===T.length-1;
    const wBars = Array.from({length:20},(_,wi)=>`<div class="wb" style="height:${8+Math.random()*28}px;animation-delay:${wi*.055}s"></div>`).join('');
    const dPips = Array.from({length:5},(_,pi)=>`<div class="d-pip${pi<t.lv?' on':''}"></div>`).join('');
    const sec = document.createElement('div');
    sec.className='exp-section exp-ts'; sec.id=`t${i}`; sec.dataset.i=i; sec.style.setProperty('--tc',c);
    sec.innerHTML=`
      <div class="t-bg" style="background:radial-gradient(ellipse 55% 55% at 30% 55%,${c}35,transparent 55%),radial-gradient(ellipse 45% 45% at 70% 45%,${g2}28,transparent 55%),#07070f"></div>
      <div class="t-ov"></div>
      <div class="t-prog" id="p${i}"></div>
      <div class="t-nav">
        <span class="t-ctr">${String(i+1).padStart(2,'0')} / ${String(T.length).padStart(2,'0')}</span>
        <span class="t-genre">${t.g}</span>
      </div>
      <div class="t-content">
        <div>
          <p class="challenge-label">${LE[t.lv]} ${LL[t.lv]} Â· NÃ­vel ${t.lv}</p>
          <h2 class="t-title">${t.s}</h2>
          <p class="t-artist">${t.a}</p>
          <p class="t-desc">${t.d}</p>
        </div>
        <div class="t-player">
          <div class="vinyl" id="v${i}"></div>
          <div class="waveform" id="w${i}">${wBars}</div>
          <div class="controls-row">
            <button class="play-btn" id="pb${i}" data-i="${i}">â–¶</button>
            <a class="sp-btn" href="https://open.spotify.com/track/${t.sid}" target="_blank" rel="noopener">
              <svg class="sp-ico" viewBox="0 0 24 24" fill="#1DB954"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/></svg>
              Spotify
            </a>
          </div>
          <div class="a-prog">
            <div class="a-track" id="at${i}"><div class="a-fill" id="af${i}"></div></div>
            <div class="a-times"><span id="atm${i}">0:00</span><span id="adu${i}">â€”</span></div>
          </div>
        </div>
      </div>
      <div class="t-footer">
        <div class="diff"><span>Dificuldade</span><div class="d-pips">${dPips}</div></div>
        ${!isLast?`<div class="next-cue">PrÃ³xima <div class="nc-arrow"></div></div>`:`<div style="font-size:.6rem;letter-spacing:2px;text-transform:uppercase;color:rgba(255,255,255,.15)">Fim âœ“</div>`}
      </div>`;
    /* Nav buttons */
    const SVG_P="<svg viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'><polyline points='15 18 9 12 15 6'/></svg>";
    const SVG_N="<svg viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2'><polyline points='9 18 15 12 9 6'/></svg>";
    const bp=document.createElement('button'); bp.className='exp-nav-btn prev';
    bp.innerHTML=SVG_P+'<span>'+(i===0?'Voltar':'Anterior')+'</span>';
    bp.addEventListener('click',()=>expScrollToSection(i===0?2:i+2));
    sec.appendChild(bp);
    if(!isLast){
      const bn=document.createElement('button'); bn.className='exp-nav-btn next';
      bn.innerHTML='<span>PrÃ³xima</span>'+SVG_N;
      bn.addEventListener('click',()=>{ autoPlayEnabled=true; expScrollToSection(i+4); });
      sec.appendChild(bn);
    }
    container.appendChild(sec);

    /* Seek bar */
    sec.querySelector(`#at${i}`).addEventListener('click',e=>{
      if(player.duration && currentTrackIdx===i && playerCtx==='exp'){
        const r=e.currentTarget.getBoundingClientRect();
        player.currentTime=((e.clientX-r.left)/r.width)*player.duration;
      }
    });
    /* Play button */
    sec.querySelector(`#pb${i}`).addEventListener('click',()=>{
      autoPlayEnabled=true;
      if(playerCtx==='exp'&&currentTrackIdx===i){ if(!player.paused)player.pause(); else player.play().catch(()=>{}); }
      else { playTrack(i,'exp'); }
    });
  });

  /* IntersectionObserver for exp sections */
  const allExpSecs = [
    document.getElementById('exp-intro'),
    document.getElementById('exp-about'),
    document.getElementById('exp-challenges'),
    ...T.map((_,i)=>document.getElementById(`t${i}`))
  ];
  expObserver = new IntersectionObserver(entries=>{
    entries.forEach(entry=>{
      if(!entry.isIntersecting||entry.intersectionRatio<.6)return;
      const sec=entry.target;
      const di=allExpSecs.indexOf(sec);
      if(di>=0) updateExpDots(di);
      const i=parseInt(sec.dataset.i);
      if(isNaN(i))return;
      /* Stop exp music if leaving exp page â€” handled by nav() */
      if(autoPlayEnabled && playerCtx==='exp' && i!==currentTrackIdx) playTrack(i,'exp');
      else if(autoPlayEnabled && playerCtx===null && i!==currentTrackIdx) playTrack(i,'exp');
    });
  },{threshold:.6,root:document.getElementById('exp-scroll')});
  allExpSecs.forEach(s=>{ if(s) expObserver.observe(s); });
})();

function updateExpDots(idx) {
  document.querySelectorAll('.exp-sdot').forEach((d,i)=>d.classList.toggle('active',i===idx));
}
function expScrollToSection(idx) {
  const allSecs=[
    document.getElementById('exp-intro'),document.getElementById('exp-about'),document.getElementById('exp-challenges'),
    ...T.map((_,i)=>document.getElementById(`t${i}`))
  ];
  const target=allSecs[Math.max(0,Math.min(allSecs.length-1,idx))];
  if(target){ const sc=document.getElementById('exp-scroll'); sc.scrollTo({top:target.offsetTop,behavior:'smooth'}); }
}
function expScrollToTrack(idx){ autoPlayEnabled=true; expScrollToSection(idx+3); }
function expGoToAbout(){
  const sc=document.getElementById('exp-scroll');
  const ab=document.getElementById('exp-about');
  if(sc&&ab) sc.scrollTo({top:ab.offsetTop,behavior:'smooth'});
}

function setExpPlayingUI(idx,on){
  if(idx<0)return;
  const btn=document.getElementById(`pb${idx}`),v=document.getElementById(`v${idx}`),w=document.getElementById(`w${idx}`);
  if(btn){btn.innerHTML=on?'â¸':'â–¶';btn.classList.toggle('playing',on);btn.classList.remove('loading');}
  if(v)v.classList.toggle('playing',on);
  if(w)w.classList.toggle('playing',on);
}
function resetExpProgress(idx){
  const f=document.getElementById(`af${idx}`),p=document.getElementById(`p${idx}`),t=document.getElementById(`atm${idx}`);
  if(f)f.style.width='0%';if(p)p.style.width='0%';if(t)t.textContent='0:00';
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PLAYLIST â€” build & controls
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let plBuilt = false;
function buildPlaylist(){
  if(plBuilt)return; plBuilt=true;
  const list=document.getElementById('pl-track-list');
  T.forEach((t,i)=>{
    const c=GC[t.g]||'#1DB954';
    const pips=Array.from({length:5},(_,pi)=>`<div class="pl-tr-pip" style="${pi<t.lv?'background:'+c+'70':''}"></div>`).join('');
    const row=document.createElement('div');
    row.className='pl-track-row'; row.id=`plr${i}`;
    row.innerHTML=`<span class="pl-tr-num">${String(i+1).padStart(2,'0')}</span><span class="pl-tr-icon">â–¶</span><div class="pl-tr-info"><div class="pl-tr-name">${t.s}</div><div class="pl-tr-artist">${t.a}</div></div><span class="pl-tr-genre" style="border-color:${c}30;color:${c}80">${t.g}</span><div class="pl-tr-lv">${pips}</div>`;
    row.addEventListener('click',()=>plPlay(i));
    list.appendChild(row);
  });
}

function plPlay(idx){
  autoPlayEnabled=true;
  /* If already playing this track in playlist, toggle */
  if(playerCtx==='playlist'&&currentTrackIdx===idx){ if(!player.paused)player.pause(); else player.play().catch(()=>{}); return; }
  /* Clear previous active */
  document.querySelectorAll('.pl-track-row').forEach(r=>r.classList.remove('active'));
  const row=document.getElementById(`plr${idx}`);
  if(row)row.classList.add('active');
  /* Update now playing bar */
  document.getElementById('pl-np-track').textContent=T[idx].s;
  document.getElementById('pl-np-artist').textContent=T[idx].a;
  playTrack(idx,'playlist');
}

function plPlayPause(){
  autoPlayEnabled=true;
  if(playerCtx==='playlist'&&currentTrackIdx>=0){
    if(!player.paused)player.pause(); else player.play().catch(()=>{});
  } else if(currentTrackIdx>=0){
    plPlay(currentTrackIdx);
  } else {
    plPlay(0);
  }
}
function plNext(){ plPlay((currentTrackIdx+1)%T.length); }
function plPrev(){ plPlay((currentTrackIdx-1+T.length)%T.length); }
function plSeek(e){
  if(!player.duration)return;
  const r=e.currentTarget.getBoundingClientRect();
  player.currentTime=((e.clientX-r.left)/r.width)*player.duration;
}

function setPlPlayingUI(idx,on){
  const btn=document.getElementById('pl-play-btn');
  if(btn){btn.innerHTML=on?'â¸':'â–¶';btn.classList.toggle('active-play',on);btn.classList.remove('loading');}
  if(!on) return;
  /* Update now playing */
  document.getElementById('pl-np-track').textContent=T[idx].s;
  document.getElementById('pl-np-artist').textContent=T[idx].a;
}

/* â”€â”€ Volume â”€â”€ */
let lastVolume = 1;
function plSetVolume(val) {
  player.volume = parseFloat(val);
  const icon = document.getElementById('pl-vol-icon');
  if (!icon) return;
  if (val == 0) icon.textContent = 'ğŸ”‡';
  else if (val < 0.4) icon.textContent = 'ğŸ”‰';
  else icon.textContent = 'ğŸ”Š';
}
function plToggleMute() {
  const slider = document.getElementById('pl-vol-slider');
  if (!slider) return;
  if (player.volume > 0) {
    lastVolume = player.volume;
    player.volume = 0;
    slider.value = 0;
  } else {
    player.volume = lastVolume || 1;
    slider.value = player.volume;
  }
  plSetVolume(player.volume);
}

/* Enable autoplay on first interaction */
['click','touchstart','keydown'].forEach(ev=>{
  document.addEventListener(ev,()=>{autoPlayEnabled=true;},{once:true,passive:true});
});
</script>
</body>
</html>
